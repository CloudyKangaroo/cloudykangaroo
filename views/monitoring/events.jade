extends ../layout
block head
  link(rel='stylesheet', href='/stylesheets/bootstrap-sortable.css')
block content
  .container
    .page-header
      h1 Current Event Status
    .container
      table(id="tableid_events").table.table-condensed.sortable
        thead
          tr
            th(data-defaultsort='desc') Issued
            th(data-defaultsort='disabled') Client
            th(data-defaultsort='disabled') Check
            th(data-defaultsort='disabled').visible-lg Output
        tbody
//          each event,i in events
//            if event.status > 0
//              tr(class="#{getEventClass(event.status)}", id="row-#{i}")
//                td(data-value="#{event.issued}") #{getFormattedTimestamp(event.issued)}
//                td #{event.client}
//                  button(onclick="silenceChecks('#{event.client}', false);").btn.btn-default.btn-xs.pull-left
//                    span.glyphicon.glyphicon-volume-off
//                td #{event.check}
//                  button(onclick="silenceChecks('#{event.client}', '#{event.check}');").btn.btn-default.btn-xs.pull-left
//                    span.glyphicon.glyphicon-volume-off
//                td.visible-lg #{event.output.slice(0,65)}
block footer
  script(src='/javascripts/jquery.dataTables.min.js')
  script(src='/javascripts/dataTables.bootstrap.js')
  script(type='text/javascript').
    $(document).ready(function() {
    $('#tableid_events').dataTable( {
      "sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
      "sPaginationType": "bootstrap",
      "sAjaxSource": '/sensu/events/device/#{device}',
      "iDisplayLength": 10,
      "bSortClasses": false,
      "aoColumns": [
      {
        "mData": "device",
        "mRender": function (device) {
          return '<a href="/monitoring/events/device/'+client+'">' + device + '</a>';
        }
      }, {
        "mData": "type"
      }, {
        "mData": "desc"
      }, {
        "mData": "company"
      }, {
        "mData": "location"
      }, {
        "mData": "status"
      }],
      "aaSorting": [[4,'asc']],
      "oLanguage": {
        "sLengthMenu": "_MENU_ records per page"
      }
    });
  });